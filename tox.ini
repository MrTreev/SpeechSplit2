[tox]
no_package = true
pip_pre = true
requires =
    tox>=4
    setuptools

[testenv:tensorboard]
deps =
    numpy<2
    tensorboard
    pillow
commands = tensorboard --logdir artefacts/tensorboard

[testenv]
deps =
    numpy<2
    pysptk
    pyworld
    torch
    torchaudio
    tqdm
    pip
    parallel_wavegan @ git+https://github.com/Oliver-Patterson-PhD/ParallelWaveGAN.git@4beb19cb5d655c8c879d7f3780dd294bd6476992
    heartrate
    {[testenv:tensorboard]deps}

[testenv:rocm]
description = Running experiments with rocm
allowlist_externals = {[testenv:test]allowlist_externals}
commands = {[testenv:test]commands}
setenv =
    PIP_INDEX_URL = https://download.pytorch.org/whl/rocm6.1
    PIP_EXTRA_INDEX_URL = https://pypi.org/simple

[testenv:cuda]
description = Running experiments with cuda
allowlist_externals = {[testenv:test]allowlist_externals}
commands = {[testenv:test]commands}

[testenv:test]
allowlist_externals = strace
commands = python main.py
